<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <title>Mover Card</title>
    <script src="sdk/scripts/VSS.SDK.min.js"></script>
    <link rel="stylesheet" href="css/no-style.css" />
    <style>
        /* Base para evitar o flash branco */
        html, body {
            background-color: transparent !important;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        body { opacity: 0; transition: opacity 0.2s; }
        body.loaded { opacity: 1; }
    </style>
</head>
<body>
    <div id="move-card-root">
        <div>
            <label for="boardSelect">Time (Board)</label>
            <select id="boardSelect"><option>Iniciando...</option></select>
        </div>
        <div style="margin-top: 6px;">
            <label for="columnSelect">Coluna Destino</label>
            <select id="columnSelect" disabled><option>—</option></select>
        </div>
        <div style="margin-top: 8px;">
            <button id="moveBtn" disabled>Mover Card</button>
        </div>
        <div id="status"></div>
    </div>

    <script type="text/javascript">
        // --- LIMPEZA DE FUNDO ---
        // Mantém o fundo transparente para integrar ao modal escuro
        function clearBackground() {
            document.documentElement.style.background = 'transparent';
            document.body.style.background = 'transparent';
            document.body.style.backgroundColor = 'transparent';
        }
        
        var cleaner = setInterval(clearBackground, 50);
        setTimeout(function() { clearInterval(cleaner); }, 2000);

        VSS.init({
            explicitNotifyLoaded: true,
            usePlatformScripts: true,
            usePlatformStyles: true 
        });

        VSS.ready(function () {
            clearBackground();
            document.body.classList.add("loaded");

            // Monitora tema apenas para garantir transparência do fundo, não mexe nas cores dos inputs
            VSS.getService("ms.vss-web.theme-service").then(function (themeService) {
                themeService.subscribe(function (newTheme) {
                    clearBackground();
                });
            });
        });

        VSS.require(["scripts/move-card"], function (moveCard) { });
    </script>
</body>
</html>